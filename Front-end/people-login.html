<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bitter Mobile Template</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, width=device-width">
    <meta name="description" content="Bitter Mobile Template">
    <meta name="keywords" content="bootstrap, mobile template, cordova, phonegap, mobile, html, responsive" />
	<script>
		function login()
		{
		var Username=document.getElementById('username').value;
			var Password=document.getElementById('password').value;
			
		   let login1 = async (username,password,callback) => {
			let fetchUrl = 'http://3499f57q62.zicp.vip:80/users/signin';
	        let fetchOption = {
			method: 'POST',
			headers: {
				 'Accept': 'application/json',
				 'Content-Type': 'application/x-www-form-urlencoded',
			},
			body:`&username=${username}&password=${password}`,	
     		};
			fetch(fetchUrl,fetchOption).then(promise =>promise.json()).then(data=>{
				console.log(data);
				if(data.userNa==username)
				{
					localStorage.setItem("userno",data.userNo);
					window.location.href="homepage.html";
				}
				else
				{
					alert("账号或密码错误！")	
				}
				
			});
		}
		var uid=Username.toString();
		var psw=Password.toString();
		login1(uid,psw);
		}

	</script>
</head>

<body>

    <!-- Page loading -->
    <div class="loading">
        <div class="spinner-grow"></div>
    </div>
    <!-- * Page loading -->

    <!-- App Header -->
    <div class="appHeader">
        <div class="pageTitle">登录</div>
        <div class="right">
            <a href="people-register.html" class="link">注册</a>
        </div>
    </div>
    <!-- * App Header -->

    <!-- App Capsule -->
    <div id="appCapsule">

        <div class="appContent">


            <div class="sectionTitle text-center mt-3">
                <div class="title">
                    <h1>欢迎回来</h1>
                </div>
                <div class="lead mb-2">请输入账号密码</div>
            </div>

            <form action="index.html">
                <div class="form-group">
                    <input type="email" id="username"class="form-control" placeholder="手机号码/邮箱/用户名">
                </div>
                <div class="form-group">
                    <input type="password"id="password" class="form-control" placeholder="密码">
                </div>
                <div class="form-group row mt-3 mb-3">
                    <div class="col-6">
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" id="remember" />
                            <label class="custom-control-label text-muted" for="remember">记住密码</label>
                        </div>
                    </div>
                    <div class="col-6 text-right">
                        <a href="people-forgot-password.html" class="text-muted">忘记密码?</a>
                    </div>
                </div>
                <div>
                   <!-- <button type="submit" onclick="testscript()" class="btn btn-primary btn-lg btn-block"> -->
                    <button type="button" onclick="login()" class="btn btn-primary btn-lg btn-block">
                    
						登录
                    </button>
                </div>
            </form>
            <div class="divider mt-3 mb-3"></div>
            
            <div class="text-muted text-center mb-2">其他方式登录</div>
            <div class="row">
                <div class="col-6">
                    <button type="button" class="btn btn-facebook btn-block">
                        <i class="icon ion-logo-facebook"></i>
                        Facebook
                    </button>
                </div>
                <div class="col-6">
                    <button type="button" class="btn btn-twitter btn-block">
                        <i class="icon ion-logo-twitter"></i>
                        Twitter
                    </button>
                </div>
            </div>


        </div>


    </div>
    <!-- appCapsule -->

    <!-- ///////////// Js Files ////////////////////  -->
    <!-- Jquery -->
    <script src="assets/js/lib/jquery-3.4.1.min.js"></script>
    <!-- Bootstrap-->
    <script src="assets/js/lib/popper.min.js"></script>
    <script src="assets/js/lib/bootstrap.min.js"></script>
    <!-- Owl Carousel -->
    <script src="assets/js/plugins/owl.carousel.min.js"></script>
    <!-- Main Js File -->
    <script src="assets/js/app.js"></script>
	<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
	<script>
		// 测试
				// function testscript() {
				// 	var jqxhr = $.get('http://47.95.220.161:8080/videos/hello')
				// 	.done(function (data) {
				// 		console.log('成功, 收到的数据: ' + JSON.stringify(data));
						
				// 	}).fail(function (xhr, status) {
				// 		console.log('失败: ' + xhr.status + ', 原因: ' + status);
				// 	});
				// 	console.log(jqxhr);
				// }


			//用户登录

			//   let fetchUrl = 'http://47.95.220.161:8080/videos/hello';
			//   let fetchOption = {
			//     method: 'GET'
			//   };
			// fetch(fetchUrl, fetchOption).then(data => {
			// 	console.log(data.text());
			// });
			// } 

		 //.then(promise => promise.json())的作用？
		 
		 // function testscript(){
		 // 	//用户登录
		 // 	let login = (UserID,password,callback) => {
		 // 	  let fetchUrl = 'http://47.95.220.161:8080/user/pwdLogin';
		 // 	  let fetchOption = {
		 // 	    method: 'post',
		 // 	    headers: {
		 // 	      'Accept': 'application/json',
		 // 	      'Content-Type': 'application/x-www-form-urlencoded',
		 // 	    },
		 // 	    body: `&userID=${UserID}&password=${password}`,
		 // 	  };
		 // 	fetch(fetchUrl, fetchOption).then(promise => promise.json()).then(callback);
		 // 	} 
		 	
		 // 	login('testUser1', 1, function(data) {
		 // 		console.log(data);
		 // 	});
		 //  }
		 

	</script>


</body>

</html>
